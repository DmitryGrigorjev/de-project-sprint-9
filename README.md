# Проект 9-го спринта

### Как работать с репозиторием
1. В вашем GitHub-аккаунте автоматически создастся репозиторий `de-project-sprint-9` после того, как вы привяжете свой GitHub-аккаунт на Платформе.
2. Скопируйте репозиторий на свой компьютер. В качестве пароля укажите ваш `Access Token`, который нужно получить на странице [Personal Access Tokens](https://github.com/settings/tokens)):
	* `git clone https://github.com/{{ username }}/de-project-sprint-9.git`
3. Перейдите в директорию с проектом: 
	* `cd de-project-sprint-9`
4. Выполните проект и сохраните получившийся код в локальном репозитории:
	* `git add .`
	* `git commit -m 'my best commit'`
5. Обновите репозиторий в вашем GitHub-аккаунте:
	* `git push origin main`
	
### Выполнение проекта
# DDS слой 

1. Не очень понятно написано в задании, но насколько я понял - данные из брокера уже лежат в stg слое после выполнения заданий спринта, за одним исключением -
	как и говорилось в ходе спринта названия ресторана нет, только uuid. Поэтому в ходе проекта будем обогащать данные в dds 
	слое из редиса (где кстати из всех данных всего один ресторан) и разносить
	по таблицам dds слоя разбирая json из поля paylod в таблице stg слоя (а не забирать все и обогащать из kafka). Скриншоты данных - redis.png и stg_postgre.png.
	
##### ок, создал два топика dds-service-orders и cdm-service-orders
1. Да, пришлось перекроить полностью логику приложения. Из редиса сырые данные отправляются в топик stg-service-orders, после чтения из stg-слоя в 
	postgre, данные отправляются в топик dds-service-orders. Таким образом dds_processor_job обогащает полученными из этих двух топиков данных
	слой dds, ввставка в который реализована в dds_repository методами класса PgConnect

2. Запушено в yandex-cloud - cr.yandex/crp1ihf9a8emk9sn50du/dds_service:v2023-02-20-r2

# CDM слой

1. Здесь логика менее насыщенная и данные в dds слое "чистые". Два несложных запроса в cdm_repository.py заполняют витрины данных, предварительно при инициализации двух
	других классов витрины очищаются.
2. аналогично - cr.yandex/crp1ihf9a8emk9sn50du/cdm_service:v2023-02-20-r2

# Вроде бы все. по DataLens не стал делать визуализацию, она не обязательна :)
